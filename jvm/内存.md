##运行数据区域
java虚拟机在java程序执行的过程中，会将其管理的内存，划分为若干不同的数据区域。

- 程序计数器

字节码解释器工作时，通过改变程序计数器的值来选择下一条执行的字节码指令。程序计数器，就是当前线程所执行的字节码的行号指示器。

Java虚拟机多线程，是通过线程轮流切换并分配处理器执行时间的方式实现的，任何一个时刻，一个处理器只会执行一条线程中的指令。对应的每条线程都需要一个独立的程序计数器，确保各条线程互不影响，这种内存区域称为线程私有内存

- Java虚拟机栈

线程私有，生命周期和线程相同。

虚拟机栈是java方法执行的内存模型:每个方法被执行时，会创建一个栈帧，用来存放局部变量表、操作栈、动态链接、方法出口等。每个方法被调用到执行完成，整个过程，对应一个栈帧在虚拟机栈中从入栈到出栈的过程。

局部变量表，存放编译期可知的各种数据基本类型、对象引用和字节码指令地址。64位long、double占用2个局部变量空间、其他数据类型占用1个空间。局部变量表空间是在编译期分配的，需要在帧中占用多大空间是确定的，方法运行期间，不会改变局部变量表大小。

异常:stackOverflowError，线程请求栈深度超出虚拟机允许深度；outOfMemoryError虚拟机栈动态扩展，扩展申请无法得到足够内存。

- 本地方法栈

和Java虚拟机栈类似，本地方法栈，为使用Native方法服务。
异常：stackOverflowError，outOfMemoryError

- java堆

被所有线程共享，虚拟机启动时创建，存放对象实例。是垃圾收集器管理的主要区域，被称为GC堆。

堆可以处在物理不连续的内存空间中，逻辑上连续，即可。通过-xmx和-xms控制。

- 方法区

线程共享，存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等

对此区域垃圾回收，主要针对常量池回收和对类型卸载。

- 运行时常量池

是方法区的一部分，存放编译期class文件中生成的各种字面量和符号引用常量信息，在类加载后，存放到运行时常量池中。还会把直接引用，存放到运行时常量池中。运行期间，可能产生的新的常量也会放入其中。

- 直接内存

是用native函数，直接分配堆外内存。通过存储在java堆里面的DirectByteBuffer对象作为这块内存的引用.直接内存的存在，避免了数据在java堆和native堆间的数据复制。

